openapi: 3.0.1

info:
  title: submit-payment
  version: 1.0.0
  description: |
    # Submit Payment API

    This API is used to initiate, submit and get summary of single payment.
    Payment products allowed in this api:
    * Domestic credit transfer

    All products are represented as separate entities

    out of scope in this version
    ====
    - target error responses
    - redirection for Cancel calls (SCA) workflow

tags:
  - name: Submit Payment
    description: Group Payment API for single payment orders.
paths:
  /api/payments/v1/submit-payment:
    post:
      description: |
        The method to initiate a single credit transfer. In order to initiate specific payment (domestic, sepa or foreign)
        paymentType must be selected and set of payment type specific attributes filled.
      security:
        - openId:
            - customer
            - employee
            - third-party-customer
            - m2m
      operationId: initiateSinglePaymentDomestic
      tags:
        - Single Payment Orders
      parameters:
        - $ref: "#/components/parameters/X-Request-ID"
        - $ref: "#/components/parameters/X-Correlation-ID"
        - $ref: "#/components/parameters/X-Idempotency-Key"
      requestBody:
        $ref: '#/components/requestBodies/PostSingleCreditTransferRequest'
      responses:
        "201":
          $ref: '#/components/responses/PostSingleCreditTransferResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
components:
  securitySchemes:
    openId:
      type: openIdConnect
      openIdConnectUrl: /.well-known/openid-configuration
  parameters:
    PaymentId:
      name: paymentId
      in: path
      description: Unique Identification of the payment.
      required: true
      schema:
        type: string
        maxLength: 35

    X-Request-ID:
      name: X-Request-ID
      in: header
      description: ID of the request, unique to the call, as determined by the initiating party.
      required: true
      example: '99391c7e-ad88-49ec-a2ad-99ddcb1f7721'
      schema:
        type: string
        format: uuid
    X-Correlation-ID:
      name: X-Correlation-ID
      in: header
      description: X-Correlation-ID will be used to track requests through all involved services to be able to graph request flows, map how services contribute to response times, identify bottle necks, etc. The X-Correlation-ID must be propagated unchanged in any and all downstream service calls to other Newton Microservices as well as NWU services. Multiple calls from Newton services to NWU services will potentially have equal X-Correlation-ID values.
      required: true
      example: '99391c7e-ad88-49ec-a2ad-99ddcb1f7721'
      schema:
        type: string
        format: uuid
    X-Idempotency-Key:
      name: X-Idempotency-Key
      in: header
      description:  Unique request identifier to support idempotency.
      required: false
      example: e457b5a2e4d86bd1198ee56343ba864fe8b2
      schema:
        type: string
        maxLength: 40

    ExternalPaymentIdFilter:
      in: query
      name: externalPaymentId
      description: External payment identifier.
      schema:
        $ref: '#/components/schemas/ExternalPaymentId'
      required: false

    DateFromFilter:
      in: query
      name: dateFrom
      description: Payment intitiated from the date until now.
      schema:
        $ref: '#/components/schemas/Date'
      required: false

    PaymentTypeFilter:
      in: query
      name: paymentType
      description: Payment of listed type [DOMESTIC, SEPA, FOREIGN].
      schema:
        type: array
        items:
          type: string
          enum:
            - DOMESTIC
            - SEPA
            - FOREIGN
        minItems: 1
      style: form
      explode: false
      required: false

    IncludeRejectedFilter:
      in: query
      name: includeRejected
      description: Include rejected or cancelled payments.
      schema:
        type: boolean
      required: false


  requestBodies:
    PostSingleCreditTransferRequest:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PostSingleCreditTransferRequest'
          example:
            {
              "paymentType": "DOMESTIC",
              "externalPaymentId": "AT-9809-98876",
              "amount": {
                type: "INSTRUCTED",
                currency: "CAD",
                amount: 123.45
              },
              "creditorAccount":{
                "accountReferenceType": "PAN",
                "pan": "1234567898765432",
                "currency": "EUR"
              },
              "creditor" : {
                "name": "Merchant123",
                "address": {
                  "addressLine1": "Rue blue 89",
                  "addressLine2": "75000 Paris",
                  "country": "FR"
                }
              },
              "debtorAccount": {
                "accountReferenceType": "IBAN",
                "currency": "EUR",
                "iban": "FR7612345987650123456789014"
              },
              "requestedExecutionDate": "2018-05-05"
            }



  responses:
    PostSingleCreditTransferResponse:
      description: Response body with created credit transfer details.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PostSingleCreditTransferResponse'


    ErrorResponse:
      description: Unexpected Error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'


  schemas:

    DomesticCreditTransferInitiation:
      allOf:
        - $ref: '#/components/schemas/CreditTransferCommon'
        - type: object
          description: Domestic credit transfers initiation attributes.
          properties:
            serviceLevel:
              $ref: '#/components/schemas/DomesticServiceLevel'

    DomesticSingleCreditTransferInitiation:
      allOf:
        - type: object
          required:
            - paymentType
          properties:
            paymentType:
              type: string
              description: Indicates domestic transfer type.
              enum:
                - DOMESTIC
              example: 'DOMESTIC'
        - $ref: '#/components/schemas/DomesticCreditTransferInitiation'
        - $ref: '#/components/schemas/SinglePaymentOrderCommon'


    SinglePaymentOrderCommon:
      type: object
      description: Generic attributes of every single order.
      required:
        - requestedExecutionDate
      properties:
        requestedExecutionDate:
          $ref: "#/components/schemas/RequestedExecutionDate"


    DomesticServiceLevel:
      description: Service level for domestic payment according to ISO 20022.
      type: string
      enum:
        - SDVA
      example: SDVA



    Amount:
      oneOf:
        - $ref: "#/components/schemas/InstructedAmount"
        - $ref: "#/components/schemas/EquivalentAmount"
      discriminator:
        propertyName: type
        mapping:
          INSTRUCTED: "#/components/schemas/InstructedAmount"
          EQUIVALENT: "#/components/schemas/EquivalentAmount"



    InstructedAmount:
      type: object
      description: |
        Amount of money to be moved between the debtor and creditor, before deduction of
        charges, expressed in the currency as ordered by the initiating party.
      required:
        - type
        - currency
        - amount
      properties:
        type:
          type: string
          description: Discriminator value. Must be equal to 'INSTRUCTED'.
          enum:
            - INSTRUCTED
          example: 'INSTRUCTED'
        amount:
          description: The amount given with fractional digits.
          type: number
          example: 123.45
        currency:
          $ref: "#/components/schemas/CurrencyCode"

    EquivalentAmount:
      type: object
      description: |
        Amount of money to be moved between the debtor and creditor, expressed in the currency of
        the debtor's account, and the currency in which the amount is to be moved.
      required:
        - type
        - currencyOfTransfer
        - amount
      properties:
        type:
          type: string
          description: Discriminator value. Must be equal to 'EQUIVALENT'.
          enum:
            - EQUIVALENT
          example: 'EQUIVALENT'
        currencyOfTransfer:
          $ref: "#/components/schemas/CurrencyCode"
        amount:
          description: The amount given with fractional digits.
          type: number
          example: 123.45




    ######## ACCOUNT IDENTIFICATION ########

    DebtorAccount:
      description: |
        Identification of debtor account used for specific transfer. Multiple identification schemas are aplicable but not all must be supported by specific NWU.
      oneOf:
        - $ref: "#/components/schemas/AccountReferenceIban"
        - $ref: "#/components/schemas/AccountReferenceBban"
        - $ref: "#/components/schemas/AccountReferencePan"
      discriminator:
        propertyName: accountReferenceType
        mapping:
          IBAN: "#/components/schemas/AccountReferenceIban"
          BBAN: "#/components/schemas/AccountReferenceBban"
          PAN: "#/components/schemas/AccountReferencePan"

    CreditorAccount:
      description: |
        Identification of creditor account used for specific transfer. Multiple identification schemas are aplicable but not all must be supported by specific NWU.
      oneOf:
        - $ref: "#/components/schemas/AccountReferenceIban"
        - $ref: "#/components/schemas/AccountReferenceBban"
        - $ref: "#/components/schemas/AccountReferencePan"
        - $ref: "#/components/schemas/AccountReferenceMsisdn"
        - $ref: "#/components/schemas/AccountReferenceEmail"
        - $ref: "#/components/schemas/AccountReferenceTaxId"
      discriminator:
        propertyName: accountReferenceType
        mapping:
          IBAN: "#/components/schemas/AccountReferenceIban"
          BBAN: "#/components/schemas/AccountReferenceBban"
          PAN: "#/components/schemas/AccountReferencePan"
          MSISDN: "#/components/schemas/AccountReferenceMsisdn"
          EMAIL: "#/components/schemas/AccountReferenceEmail"
          TAX_IDENTIFICATION: "#/components/schemas/AccountReferenceTaxId"

    UltimateDebtor:
      description: Ultimate party that owes an amount of
        money to the (ultimate) Creditor.
        The Ultimate Debtor is the party that owes the cash
        to the (Ultimate) Creditor, i.e. as a result of receipt of
        goods or services, gifts, charity payments and is the party
        which orders the payment. It may be equal to the account
        owner whose account will be debited by the Debtor Agent
        to make the payment (i.e. the Debtor), but it can also be
        different from the Debtor. This is usually the buyer. It
        should only be specified in case it is different from the
        Debtor.
      type: object
      properties:
        name:
          type: string
          description: Name of the ultimate debtor.
          minLength: 1
          maxLength: 140
        identification:
          $ref: '#/components/schemas/PartyIdentification'
        address:
          $ref: '#/components/schemas/Address'
        countryOfResidence:
          $ref: '#/components/schemas/CountryCode'





    UltimateCreditor:
      description: Ultimate party to which an amount of
        money is due. Party that is the ultimate beneficiary of the cash
        transfer. It may be equal to or different from the Creditor.
        This is usually the seller.
      type: object
      properties:
        name:
          type: string
          description: Name of the ultimate creditor.
          minLength: 1
          maxLength: 140
        identification:
          $ref: '#/components/schemas/PartyIdentification'
        address:
          $ref: '#/components/schemas/Address'
        countryOfResidence:
          $ref: '#/components/schemas/CountryCode'



    AccountReferenceType:
      type: object
      required:
        - accountReferenceType
      properties:
        accountReferenceType:
          type: string
          enum:
            - IBAN
            - BBAN
            - PAN
            - MSISDN
            - EMAIL
            - TAX_IDENTIFICATION

    AccountReferenceIban:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: This data elements is used for payment accounts which have IBAN.
          required:
            - iban
          properties:
            iban:
              $ref: '#/components/schemas/Iban'
            currency:
              $ref: '#/components/schemas/CurrencyCode'
      example:
        {
          "currency": "EUR",
          "iban": "AT611904300234573201",
          "accountReferenceType": "IBAN"
        }

    AccountReferenceBban:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: This data elements is used for payment accounts which have no IBAN.
          required:
            - bban
          properties:
            bban:
              $ref: '#/components/schemas/Bban'
            currency:
              $ref: '#/components/schemas/CurrencyCode'

    AccountReferencePan:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: |
            Reference to an account by the Primary Account Number (PAN) of a card,
            can be tokenised by the ASPSP due to PCI DSS requirements.
          required:
            - pan
          properties:
            pan:
              $ref: "#/components/schemas/Pan"
            currency:
              $ref: '#/components/schemas/CurrencyCode'

    AccountReferenceEmail:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: Reference to an account by the customer email.
          required:
            - email
          properties:
            email:
              $ref: '#/components/schemas/Email'
            currency:
              $ref: '#/components/schemas/CurrencyCode'

    AccountReferenceTaxId:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: Reference to an account by the tax identification number.
          required:
            - taxId
          properties:
            taxId:
              $ref: '#/components/schemas/TaxIdentification'
            currency:
              $ref: '#/components/schemas/CurrencyCode'

    AccountReferenceMsisdn:
      allOf:
        - $ref: '#/components/schemas/AccountReferenceType'
        - type: object
          description: An alias to access a payment account via a registered mobile phone number.
          required:
            - msisdn
          properties:
            msisdn:
              $ref: '#/components/schemas/Msisdn'
            currency:
              $ref: '#/components/schemas/CurrencyCode'

    Creditor:
      type: object
      description: Definition of creditor.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 140
        identification:
          $ref: '#/components/schemas/PartyIdentification'
        address:
          $ref: '#/components/schemas/Address'
        countryOfResidence:
          $ref: '#/components/schemas/CountryCode'

    Debtor:
      type: object
      description: Definition of creditor.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 140
        identification:
          $ref: '#/components/schemas/PartyIdentification'
        address:
          $ref: '#/components/schemas/Address'
        countryOfResidence:
          $ref: '#/components/schemas/CountryCode'


    PartyIdentification:
      description: Identification of the party.
      oneOf:
        - $ref: '#/components/schemas/PrivateIdentification'
        - $ref: '#/components/schemas/OrganisationIdentification'
      discriminator:
        propertyName: partyType
        mapping:
          PRIVATE: '#/components/schemas/PrivateIdentification'
          ORGANISATION: '#/components/schemas/OrganisationIdentification'


    PrivateIdentification:
      type: object
      required:
        - partyType
      properties:
        partyType:
          type: string
          enum:
            - PRIVATE
        birthDate:
          type: string
          format: date
          example: '2019-09-21'
        provinceOfBirth:
          type: string
          minLength: 1
          maxLength: 35
          example: 'Vienna'
        cityOfBirth:
          type: string
          minLength: 1
          maxLength: 35
          example: 'Vienna'
        countryOfBirth:
          type: string
          minLength: 1
          maxLength: 2
          example: 'AT'
        id:
          type: string
          description: Identification assigned by an institution.
          minLength: 1
          maxLength: 35
        issuer:
          type: string
          description: Entity that assigns the identification.
          minLength: 1
          maxLength: 35
        scheme:
          $ref: '#/components/schemas/PrivateIdentificationScheme'




    PrivateIdentificationScheme:
      type: object
      properties:
        code:
          description: Name of the identification scheme, in a coded form as published in an external list ExternalPersonIdentification1Code.
          minLength: 1
          maxLength: 4
          type: string
          example: 'CCPT'
        proprietary:
          minLength: 1
          maxLength: 35
          type: string
          description: Name of the identification scheme, in a free text form.

    OrganisationIdentification:
      description: Identification of an organisation.
      type: object
      required:
        - partyType
        - id
      properties:
        partyType:
          type: string
          enum:
            - ORGANISATION
        id:
          description: Identification assigned by an institution.
          type: string
          example: '47110815'
          minLength: 1
          maxLength: 35
        issuer:
          description: Entity that assigns the identification.
          type: string
          minLength: 1
          maxLength: 35
        scheme:
          $ref: '#/components/schemas/OrganisationIdentificationScheme'

    OrganisationIdentificationScheme:
      type: object
      description: Organisation identification scheme.
      properties:
        code:
          description: Name of the identification scheme, in a coded form as published in an external list ExternalOrganisationIdentification1Code.
          minLength: 1
          maxLength: 4
          type: string
          example: 'TXID'
        proprietary:
          description: Name of the identification scheme, in a free text form.
          minLength: 1
          maxLength: 35
          type: string

    RequestedExecutionDate:
      description: |
        https://tools.ietf.org/html/rfc3339#section-5.6
        date time for the expected execution time.
      type: string
      format: date
      example: '2018-05-05'

    RemittanceInformationUnstructured:
      description: Unstructured remittance information.
      type: string
      maxLength: 140
      example: 'Ref Number Merchant'

    EndToEndIdentification:
      description: |
        Unique identification, as assigned by the initiating party, to unambiguously identify the transaction.
        This identification is passed on, unchanged, throughout the entire end-to-end chain.
      type: string
      maxLength: 35
      example: 'RI-123456789'

    UETR:
      description: |
        Unique End-to-End Transaction Reference. Generated by the Payer and passed through, without modification,
        the SWIFT network and any intermediary banks through to the Payee (beneficiary).
      type: string
      pattern: '[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}'
      example: 'a067ed60-e5d6-420a-8cac-e319dad61d07'


    Address:
      title: Address
      description: Definition of address in structured way.
      type: object
      required:
        - country
        - addressLine1
      properties:
        country:
          $ref: "#/components/schemas/CountryCode"
        addressLine1:
          type: string
          minLength: 1
          maxLength: 70
          example: 'Rue blue 89'
        addressLine2:
          type: string
          minLength: 1
          maxLength: 70
          example: '75000 Paris'
      example:
        {
          "addressLine1": "Rue blue 89",
          "addressLine2": "75000 Paris",
          "country": "FR"
        }

    PurposeCode:
      description: |
        It is an optional field to describe the purpose of the payment transaction.
        The list of possible values with description can be found in https://www.iso20022.org/catalogue-messages/additional-content-messages/external-code-sets ExternalPurpose1Code
      type: string
      minLength: 1
      maxLength: 4
      example: 'BKDF'


    CategoryPurposeCode:
      description: |
        Specifies the high level purpose of the instruction based on a set of pre-defined categories.
        The list of possible values with description can be found in https://www.iso20022.org/catalogue-messages/additional-content-messages/external-code-sets ExternalCategoryPurpose1Code
      type: string
      minLength: 1
      maxLength: 4
      example: 'LOAN'

    RemittanceInformationStructured:
      description: Structured remittance information.
      type: array
      items:
        $ref: "#/components/schemas/RemittanceInformationStructuredItem"

    RemittanceInformationStructuredItem:
      description: |
        Identification of debtor account used for specific transfer. Multiple identification schemas are aplicable but not all must be supported by specific NWU.
      oneOf:
        - $ref: "#/components/schemas/CreditorReferenceInformation"
        - $ref: '#/components/schemas/ReferredDocumentInformation'
        - $ref: "#/components/schemas/BGBudgetaryPaymentInformation"
        - $ref: "#/components/schemas/BGMultiLineBudgetaryPaymentInformation"
        - $ref: '#/components/schemas/BGSebraPaymentInformation'
      discriminator:
        propertyName: structureType
        mapping:
          CREDITOR_REFERENCE: "#/components/schemas/CreditorReferenceInformation"
          REFERRED_DOCUMENT: "#/components/schemas/ReferredDocumentInformation"
          BG_BUDGETARY_PAYMENT: "#/components/schemas/BGBudgetaryPaymentInformation"
          BG_BUDGETARY_MULTILINE_PAYMENT: "#/components/schemas/BGMultiLineBudgetaryPaymentInformation"
          BG_SEBRA_PAYMENT: "#/components/schemas/BGSebraPaymentInformation"

    CreditorReferenceInformation:
      description: Structured remittance information.
      type: object
      required:
        - reference
        - structureType
      properties:
        structureType:
          description: Structure type for creditor reference information.
          type: string
          enum:
            - CREDITOR_REFERENCE
        reference:
          type: string
          maxLength: 35
        referenceType:
          type: string
          maxLength: 35
        referenceIssuer:
          type: string
          maxLength: 35

    ReferredDocumentInformation:
      type: object
      required:
        - structureType
      properties:
        structureType:
          description: Structure type for creditor reference information.
          type: string
          enum:
            - REFERRED_DOCUMENT
        code:
          description: "Special Code"
          type: string
          minLength: 1
          maxLength: 35
          example: 'MSIN or CNFA etc'
        proprietary:
          description: "Proprietary"
          type: string
          minLength: 1
          maxLength: 35
          example: 'Proprietary'
        issuer:
          description: "referenceIssuer"
          type: string
          minLength: 1
          maxLength: 35
          example: 'referenceIssuer'
        number:
          description: "Loan Number"
          type: string
          minLength: 1
          maxLength: 35
          example: 'LON124546'
        relatedDate:
          type: string
          format: date
          example: '2019-09-21'


    BGBudgetaryPaymentInformation:
      type: object
      description: BGN budget transfers remittance information.
      required:
        - taxPayerName
        - taxPayerId
        - taxPayerType
        - structureType
      properties:
        structureType:
          description: Structure type for creditor reference information.
          type: string
          enum:
            - BG_BUDGETARY_PAYMENT
        regulatoryReportType:
          $ref: "#/components/schemas/BGRegulatoryReportType"
        documentNumber:
          $ref: "#/components/schemas/BGBudgetDocumentNumber"
        documentDate:
          description: Document Date issued by Government authority.
          type: string
          format: date
        taxPayerId:
          $ref: "#/components/schemas/BGTaxPayerId"
        taxPayerType:
          $ref: "#/components/schemas/BGTaxPayerType"
        taxPayerName:
          $ref: "#/components/schemas/BGTaxPayerName"
        paymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        debtorPaymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        fromDate:
          description: From Date - start of period date.
          type: string
          format: date
        endDate:
          description: End Date - end of period date.
          type: string
          format: date

    BGMultiLineBudgetaryPaymentInformation:
      type: object
      description: BGN multi-line budget transfers remittance information.
      required:
        - taxPayerName
        - taxPayerId
        - taxPayerType
        - multiLineBudgetDetails
        - structureType
      properties:
        structureType:
          description: Structure type for creditor reference information.
          type: string
          enum:
            - BG_BUDGETARY_MULTILINE_PAYMENT
        taxPayerId:
          $ref: "#/components/schemas/BGTaxPayerId"
        taxPayerType:
          $ref: "#/components/schemas/BGTaxPayerType"
        taxPayerName:
          $ref: "#/components/schemas/BGTaxPayerName"
        debtorPaymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        multiLineDetails:
          type: array
          items:
            $ref: "#/components/schemas/BGBudgetaryPaymentDetailsItem"
          minItems: 1
          maxItems: 4

    BGBudgetaryPaymentDetailsItem:
      type: object
      description: Details item for budget payments.
      required:
        - paymentCategory
        - itemAmount
        - instructedInformation
      properties:
        paymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        itemAmount:
          $ref: "#/components/schemas/InstructedAmount"
        regulatoryReportType:
          $ref: "#/components/schemas/BGRegulatoryReportType"
        documentNumber:
          $ref: "#/components/schemas/BGBudgetDocumentNumber"
        documentDate:
          description: Document Date issued by Government authority.
          type: string
          format: date
        fromDate:
          description: From Date - start of period date.
          type: string
          format: date
        endDate:
          description: End Date - end of period date.
          type: string
          format: date
        instructedInformation:
          description: Additional instructed information unstructured.
          type: string
          maxLength: 70

    BGSebraPaymentInformation:
      description: BGN SEBRA transfers remittance information.
      type: object
      required:
        - paymentCategory
        - structureType
      properties:
        structureType:
          description: Structure type for creditor reference information.
          type: string
          enum:
            - BG_SEBRA_PAYMENT
        paymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        debtorPaymentCategory:
          $ref: "#/components/schemas/BGPaymentCategory"
        regulatoryReportType:
          $ref: "#/components/schemas/BGRegulatoryReportType"
        documentNumber:
          $ref: "#/components/schemas/BGBudgetDocumentNumber"
        documentDate:
          description: Document Date issued by Government authority.
          type: string
          format: date
        fromDate:
          description: From Date - start of period date.
          type: string
          format: date
        endDate:
          description: End Date - end of period date.
          type: string
          format: date
        activityCode:
          description: The code of activity of the payer's payment reason.
          type: string
          minLength: 1
          maxLength: 4

    BGPaymentCategory:
      description: Budget payment type - according BNB nomenclature.
      type: string
      pattern: '^\d{6}$|^\d{2}$'

    BGBudgetDocumentNumber:
      description: The number of the document.
      type: string
      pattern: '^.{0,17}$'

    BGRegulatoryReportType:
      description: The type of the document.
      type: string
      pattern: '^[1-69]$'

    BGTaxPayerId:
      description: Bulstat/EGN/ENC(LNC) of the obliged party.
      type: string
      minLength: 9
      maxLength: 13

    BGTaxPayerName:
      description: The name of the obliged party.
      type: string
      minLength: 1
      maxLength: 35

    BGTaxPayerType:
      description: The tax type code of the obliged party.
      example: 'EGN'
      type: string
      enum:
        - EGN
        - EIK
        - PNF

    InstructionPriority:
      description: Serves the closer specification of the transfer priority.
      type: string
      enum:
        - HIGH
        - NORMAL
      example: 'NORMAL'


    CreditorAgentName:
      description: Name of creditor financial agent.
      example: Merchant123
      type: string
      maxLength: 140

    ChargeBearer:
      description: |
        Specifies which party/parties will bear the charges associated with the processing of the payment transaction.
      x-enum-elements:
        - name: CRED
          description: 'CREDITOR'
        - name: DEBT
          description: 'DEBTOR'
        - name: SHAR
          description: 'SHARED'
        - name: SLEV
          description: 'SLEV'
      type: string
      enum:
        - CRED
        - DEBT
        - SHAR
        - SLEV
      example: CRED

    Error:
      type: object
      properties:
        id:
          type: string
          description: Unique UUID for audit purposes.
        code:
          type: string
          description: Optional error code for reporting purposes.
        description:
          type: string
          description: The description of the error.

    CreditTransferCommon:
      type: object
      description: Common attrubutes of a credit transfer initiation request and an initiated credit transfer.
      required:
        - externalPaymentId
        - amount
        - debtorAccount
        - creditorAccount
      properties:
        externalPaymentId:
          $ref: '#/components/schemas/ExternalPaymentId'
        endToEndId:
          $ref: '#/components/schemas/EndToEndIdentification'
        uetr:
          $ref: '#/components/schemas/UETR'
        amount:
          $ref: "#/components/schemas/Amount"
        exchangeRateInformation:
          $ref: '#/components/schemas/ExchangeRateInformation'
        debtor:
          $ref: '#/components/schemas/Debtor'
        debtorAccount:
          $ref: "#/components/schemas/DebtorAccount"
        creditorAccount:
          $ref: "#/components/schemas/CreditorAccount"
        creditor:
          $ref: "#/components/schemas/Creditor"
        creditorAgent:
          $ref: '#/components/schemas/Bicfi'
        creditorAgentName:
          $ref: '#/components/schemas/CreditorAgentName'
        remittanceInformationStructured:
          $ref: '#/components/schemas/RemittanceInformationStructured'
        remittanceInformationUnstructured:
          $ref: '#/components/schemas/RemittanceInformationUnstructured'
        purposeCode:
          $ref: '#/components/schemas/PurposeCode'
        categoryPurpose:
          $ref: '#/components/schemas/CategoryPurposeCode'
        instructionPriority:
          $ref: '#/components/schemas/InstructionPriority'
        chargeBearer:
          $ref: '#/components/schemas/ChargeBearer'
        intermediary:
          type: array
          items:
            $ref: '#/components/schemas/Intermediary'
        ultimateDebtor:
          $ref: '#/components/schemas/UltimateDebtor'
        ultimateCreditor:
          $ref: '#/components/schemas/UltimateCreditor'





    CreditTransfer:
      description: Initiated credit transfer.
      allOf:
        - type: object
          properties:
            paymentId:
              $ref: '#/components/schemas/PaymentId'
            status:
              $ref: '#/components/schemas/PaymentStatus'
            statusDescription:
              $ref: '#/components/schemas/StatusDescription'

    DomesticSingleCreditTransfer:
      allOf:
        - type: object
          description: This is additional for domestic payment initiation.
          required:
            - paymentType
          properties:
            paymentType:
              type: string
              description: Indicates domestic transfer type.
              enum:
                - DOMESTIC
              example: 'DOMESTIC'
            serviceLevel:
              $ref: '#/components/schemas/DomesticServiceLevel'
        - $ref: '#/components/schemas/CreditTransfer'
        - $ref: '#/components/schemas/SinglePaymentOrderCommon'

    PaymentStatus:
      title: transactionStatus
      example: ACCP
      x-enum-elements:
        - name: ACCC
          description: 'AcceptedSettlementCompleted - Money Credited'
        - name: ACCP
          description: 'AcceptedCustomerProfile'
        - name: ACSC
          description: 'AcceptedSettlementCompleted'
        - name: ACSP
          description: 'AcceptedSettlementInProgress'
        - name: ACTC
          description: 'AcceptedTechnicalValidation'
        - name: ACWC
          description: 'AcceptedWithChange'
        - name: ACWP
          description: 'AcceptedWithoutPosting'
        - name: RCVD
          description: 'Received'
        - name: PDNG
          description: 'Pending'
        - name: PATC
          description: 'PartiallyAcceptedTechnical'
        - name: RJCT
          description: 'Rejected'
        - name: CANC
          description: 'Cancelled'
      type: string
      enum:
        - ACCC
        - ACCP
        - ACSC
        - ACSP
        - ACTC
        - ACWC
        - ACWP
        - RCVD
        - PDNG
        - PATC
        - RJCT
        - CANC


    CurrencyCode:
      type: string
      description: ISO 4217 Alpha 3 currency code.
      maxLength: 3
      pattern: '[A-Z]{3}'
      example: 'EUR'


    CountryCode:
      description: ISO 3166 ALPHA2 country code.
      type: string
      pattern: '[A-Z]{2}'
      example: 'SE'

    Bban:
      description: |
        Basic Bank Account Number (BBAN) Identifier

        This data element can be used in the body of the Consent Request
          Message for retrieving Account access Consent from this Account. This
          data elements is used for payment Accounts which have no IBAN.
          ISO20022: Basic Bank Account Number (BBAN).

          Identifier used nationally by financial institutions, i.e., in individual countries,
          generally as part of a National Account Numbering Scheme(s),
          which uniquely identifies the account of a customer.
      type: string
      pattern: '[a-zA-Z0-9]{1,30}'
      example: 'BARC12345612345678'

    Bicfi:
      description: BICFI ISO 9362.
      type: string
      pattern: '[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}'
      example: 'AAAADEBBXXX'

    Iban:
      type: string
      description: IBAN of an account.
      pattern: '[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}'
      example: 'FR7612345987650123456789014'

    Msisdn:
      type: string
      maxLength: 35
      description: Mobile phone number.
      example: '+491701234567'

    Email:
      type: string
      maxLength: 140
      description: Mobile phone number.
      example: 'hans.meier@gmail.com'

    TaxIdentification:
      description: Contains party tax identifier.
      type: string
      minLength: 1
      maxLength: 35

    Pan:
      description: Primary Account Number according to ISO/IEC 7812.
      type: string
      maxLength: 35
      example: '5409050000000000'

    ExternalPaymentId:
      description: |
        ExternalPaymentID is assigned by API consumers in order to search payments by known to the
          consumer payment identifier. In order to avoid payment duplication value passed in ExternalPaymentID
          must be unique and the use of the same value must cause user error (HTTP status code 400).
      example: PAY-21765-AF
      type: string

    Date:
      type: string
      format: date
      example: '2020-05-05'



    PaymentId:
      description: |
        PaymentId is assigned by API provider in order to uniquely identify resources created when a valid payment
        initiation request is processed.
      example: 1234-wertiq-983
      type: string

    StatusDescription:
      description: Description of payment status.
      example: payment init accepted
      type: string



    Intermediary:
      type: object
      description: Agent and Account between the debtor and the creditor.
      properties:
        account:
          $ref: '#/components/schemas/IntermediaryAccount'
        agent:
          $ref: '#/components/schemas/AccountAgent'

    IntermediaryAccount:
      type: object
      description: Account identification.
      required:
        - identification
      properties:
        identification:
          $ref: '#/components/schemas/IntermediaryAccountIdentification'
        currency:
          $ref: '#/components/schemas/CurrencyCode'

    IntermediaryAccountIdentification:
      description: Required iban or otherId.
      type: object
      properties:
        iban:
          type: string
          description: Account IBAN.
          example: 'AT913225000000420018'
          minLength: 1
          maxLength: 34
          pattern: '^[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}$'
        otherIdentification:
          $ref: '#/components/schemas/OtherId'


    OtherId:
      description: Other identification of an account or agent.
      type: object
      properties:
        id:
          $ref: '#/components/schemas/OtherUniqueIdentification'
        issuer:
          type: string
          minLength: 1
          maxLength: 35
        scheme:
          $ref: '#/components/schemas/OtherScheme'

    OtherUniqueIdentification:
      type: string
      description: Other unique identification.
      example: MCCT1306251365420971215
      minLength: 1
      maxLength: 35


    OtherScheme:
      type: object
      properties:
        code:
          minLength: 1
          maxLength: 4
          type: string
        proprietary:
          minLength: 1
          maxLength: 35
          type: string

    AccountAgent:
      type: object
      description: The Financial institution which is servicing an account. Either BIC name of otherID are required.
      required:
        - financialInstitutionIdentification
      properties:
        financialInstitutionIdentification:
          $ref: '#/components/schemas/FinancialInstitutionIdentification'

    FinancialInstitutionIdentification:
      type: object
      properties:
        bic:
          $ref: '#/components/schemas/Bicfi'
        name:
          type: string
          description: Name of the account servicing institution. Only used for creditor agent.
          example: 'EXAMPLE BANK'
          minLength: 1
          maxLength: 140
        otherIdentification:
          $ref: '#/components/schemas/OtherId'

    ExchangeRateInformation:
      description: Set of elements used to provide details on the currency exchange rate and contract.
      type: object
      required:
        - contractId
      properties:
        exchangeRate:
          description: Exchange rate.
          type: string
          minLength: 1
          maxLength: 11
          example: '1.54'
        rateType:
          $ref: '#/components/schemas/RateType'
        contractId:
          $ref: '#/components/schemas/OtherUniqueIdentification'

    RateType:
      type: string
      example: AGRD
      enum:
        - SPOT
        - SALE
        - AGRD


    PostSingleCreditTransferResponse:
      allOf:
        - $ref: '#/components/schemas/DomesticSingleCreditTransfer'

    PostSingleCreditTransferRequest:
      $ref: '#/components/schemas/DomesticSingleCreditTransferInitiation'
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/LIAMFORDAU/submit-payent/1.0.0